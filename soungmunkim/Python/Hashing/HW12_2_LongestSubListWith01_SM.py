"""
[0ê³¼ 1ì˜ ê°œìˆ˜ê°€ ê°™ì€ ë¶€ë¶„ listì˜ ê¸¸ì´ ë°˜í™˜]

0ê³¼ 1ë¡œë§Œ ì´ë£¨ì–´ì§„ ë¦¬ìŠ¤íŠ¸ numsë¥¼ ì…ë ¥ìœ¼ë¡œ ë°›ëŠ”ë‹¤. 0ê³¼ 1ì˜ ê°œìˆ˜ê°€ ê°™ì€ ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ì˜ ìµœëŒ€ê°’ì„ return í•˜ëŠ” í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì‹œì˜¤. 
ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ë€, ğ‘›ğ‘¢ğ‘šğ‘ [ğ‘–: ğ‘—], 0 â‰¤ ğ‘– â‰¤ ğ‘— â‰¤ ğ‘™ğ‘’ğ‘›(ğ‘›ğ‘¢ğ‘šğ‘ )ì™€ ê°™ì´ ë¦¬ìŠ¤íŠ¸ì˜ ì—°ì†ëœ ì¼ë¶€ë¶„ì„ ëœ»í•œë‹¤. 
ê·¸ëŸ¬í•œ ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ê°€ ì—†ìœ¼ë©´ 0 ì„ return í•˜ë©´ ëœë‹¤.
(ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ëŠ” 1 ì´ìƒì´ë‹¤.)

TestCase1)
P2([1,1,0,1,0,1])
4
"""

def P2(nums:list):
    # jë¡œ ëì„ í™•ì¸í•˜ê¸° ìœ„í•´ -1ë¥¼ ë’¤ì— ë¶™ì´ê¸°
    nums.append(-1)
    dct = {0:1, 1:0}
    
    j = 1
    idx_lst = []
    max_len = 0
    cnt = 0
        
    for i in range(len(nums)-1):
        # 1ê³¼ 0ì´ êµì°¨ë˜ëŠ” index ìŒ listì— ì €ì¥
        if dct.get(nums[i]) == nums[j]:
            idx_lst.append((i, j))
            
        # 1ê³¼ 0ì´ êµì°¨ë˜ì§€ ì•Šê±°ë‚˜ num listê°€ ëë‚˜ë©´   
        elif dct.get(nums[i]) != nums[j] or nums[j] == -1: 
            
            #ë§Œì•½ êµì°¨ëœ ê²Œ ìˆë‹¤ë©´ ëì  - ì‹œì‘ì ìœ¼ë¡œ count ì•Œê¸°
            if len(idx_lst) > 0:
                cnt = idx_lst[-1][-1] - idx_lst[0][0]
           
            # ìµœëŒ€ê°’ Update
            max_len = max(max_len, cnt)
            # countê°€ í™€ìˆ˜ì¼ ê²½ìš° +1 í•´ì„œ ì§ìˆ˜ë¡œ (1,0ê°™ì€ ê°œìˆ˜ = ì§ìˆ˜)
            if max_len % 2 != 0:
                max_len += 1
                
            idx_list = [] # êµì°¨ë˜ëŠ” ì§€ì  ë‹¤ì‹œ reset
        
        j += 1
    
    return max_len
            