"""
[ë‘ ë¶€ë¶„ Listì˜ í•©ì´ ê°™ì€ ìµœëŒ€ ê¸¸ì´ ë°˜í™˜]

0 ê³¼ 1 ë¡œë§Œ ì´ë£¨ì–´ì§„ ë¦¬ìŠ¤íŠ¸ A, B ë¥¼ ì…ë ¥ìœ¼ë¡œ ë°›ëŠ”ë‹¤. 
ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ ê¸¸ì´ì˜ ìµœëŒ€ê°’ì„ return í•˜ëŠ” í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì‹œì˜¤. 
ê·¸ëŸ¬í•œ ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ê°€ ì—†ìœ¼ë©´ 0 ì„ return í•˜ë©´ ëœë‹¤.
(Aì™€ BëŠ” ê¸¸ì´ê°€ 1ì´ìƒì´ê³ , ê¸¸ì´ê°€ ì„œë¡œ ê°™ë‹¤.)
ì¡°ê±´: 
ğ‘ ğ‘¢ğ‘š(ğ´[ğ‘–: ğ‘—]) == ğ‘ ğ‘¢ğ‘š(ğµ[ğ‘–: ğ‘—]), 0 â‰¤ ğ‘– â‰¤ ğ‘— â‰¤ ğ‘™ğ‘’ğ‘›(ğ´)

TestCase1)
>>> A = [0,1,1,(0,1,0,1,1),1]
>>> B = [0,0,0,(1,0,1,0,1),0]
>>>>P3(A,B)
5 

"""

def P3_withfunc(A, B):
    
    # ëˆ„ì  í•© êµ¬í•˜ëŠ” í•¨ìˆ˜
    def get_cumulative_sum(nums):
        cum_sum = [0]
        total = 0
        for num in nums:
            total += num
            cum_sum.append(total)
        return cum_sum
    # ëˆ„ì í•©ì„ ê° ë¦¬ìŠ¤íŠ¸ ë§ˆë‹¤ ë§Œë“¤ê¸°
    cum_sum_A = get_cumulative_sum(A)
    cum_sum_B = get_cumulative_sum(B)

    max_len = 0
    sum_diff = {}

    # ê° ìœ„ì¹˜ì—ì„œì˜ ëˆ„ì  í•©ì˜ ì°¨ì´ë¥¼ ì €ì¥í•˜ë©° ë™ì¼í•œ ì°¨ì´ë¥¼ ê°€ì§„ ìœ„ì¹˜ë¥¼ ì°¾ëŠ”ë‹¤.
    for i in range(len(A) + 1):
        diff = cum_sum_A[i] - cum_sum_B[i]
        
        # ë§Œì•½ ë™ì¼í•œ ì°¨ì´ê°€ ì´ì „ì— ë‚˜íƒ€ë‚¬ë‹¤ë©´
        if diff in sum_diff:
            # í˜„ì¬ ìœ„ì¹˜ì™€ ì´ì „ ìœ„ì¹˜ì˜ ì°¨ì´ë¥¼ ê¸¸ì´ë¡œ ê³„ì‚°
            length = i - sum_diff[diff]
            max_len = max(max_len, length)
        else:
            sum_diff[diff] = i

    return max_len
